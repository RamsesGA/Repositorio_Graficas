////////////////////////////////////////////////////////////////////////////////
// Filename: Luminance.ps
////////////////////////////////////////////////////////////////////////////////
#version 400


/////////////////////
// INPUT VARIABLES //
/////////////////////
in vec2 TexCoord;


//////////////////////
// OUTPUT VARIABLES //
//////////////////////
layout(location = 0) out vec4 Luminance;


///////////////////////
// UNIFORM VARIABLES //
///////////////////////
uniform sampler2D PBR;


////////////////////////////////////////////////////////////////////////////////
// Shader Functions
////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////
// Pixel Shader
////////////////////////////////////////////////////////////////////////////////
void main()
{
	vec4 LumFactor = vec4(0.2f, 0.587f, 0.15f, 1.0f);

	vec4 Color = vec4(texture(PBR, TexCoord).xyz, 1.0f);
	float lum = log(dot(Color, LumFactor) + 0.00000001f);

	Luminance = vec4(lum);
}